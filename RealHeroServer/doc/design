1, all hero information are read from text file / db
   like what's the name, how many hp, has what skills


0, 每个esob携带一个类似action的东西, 标识是干嘛用的object, 

   比如是供选择的3个英雄, 还是场上所有人已选的英雄数组


* 因为不同地方需要的玩家顺序可能不一样, 故规定叫法
     在准备房间的叫做用户(user)
     在开局后决定好顺序的大家叫做玩家(player)
     在玩游戏的每个英雄(刚被兽, 光之守卫, 关羽张飞等)叫做英雄(hero/character)




实现waiting 功能
由于waiting 可能需要嵌在每个逻辑前或者后, 
但对逻辑中间影响不大, 所以为了降低实现的复杂度, 先不做waiting,
最后统一插入waiting的功能




1, 发三张英雄牌供选择的时候需要传给玩家一个esobject, 包含3个待选英雄
2, 选择角色传给后端一个角色id
3, 当所有玩家都选择完, 传给每个玩家所有玩家选择英雄id组成的的数组和玩家数组
   (数组中的id顺序不同, 都以自己为开始, 顺序向下)
4, 发身份牌, 先生成8个, 传给前端每个玩家一个发身份牌的action, +2个身份id, 一个自己的, 一个上家的
5, 发手牌, 传给每个玩家一个esob, 包括4个自己摸到的牌的id, 
6, 摸一张牌(发给room一个esob, 包括1个id), 从房主开始数数, 决定第一个出牌的玩家
   (server端要重新排一下玩家顺序, 初始时候房主是第一位, 整理后决定出的第一个出牌玩家为第一位)
07, 排好后通知所有玩家, 有个玩家先开始的 action + heroId
08, 回合开始, 循环8个英雄(demo时候2个), 每个英雄的回合内, 循环其6个阶段
===========进入施法阶段==============
===========状态判定阶段==============
1, 检测当前玩家是否中了状态, 如果中了状态, 则server端循环检查谁有驱散
2, 如果检测到有驱散, 或者驱散技能(lili)的玩家x, 
   则server传递给玩家x, 是否被动使用驱散的action, 或者使用驱散技能的action
   同时通知所有其他玩家, 等待有人决定是否使用驱散, 传一个等待action
3, 如果不使用, 则传给server取消的action
   然后server继续向下循环谁有驱散, 
   如果使用了, 玩家通知server使用了哪张牌( 使用手牌action+牌id ), server扣减玩家x这张牌, 
   ( 如果驱散成功后有特定技能出发的, 则发动技能 )
   通知其他所有玩家, 玩家x减少了一张牌( 或者几张, 比如lili是0张 ), 传一个减少牌的action, +heroId, +减少了几张牌
   server从当前玩家开始循环寻找驱散, 重复步骤2
   直到递归最外层所有玩家结束
4, 如果没被驱散, 则执行判定牌效果  ====具体效果依牌而定(后面具体讨论每张牌的效果)
   如果被驱散, 则进入玩家摸牌阶段
===========摸牌阶段==============
1, server检查当前英雄是否有摸牌阶段技能, 
   如果有, 则传递给玩家   是否使用这个技能的action
   如果发动, 则传给server使用技能的action+技能id
   如果不发动, 传递给server 取消action
2, 摸牌的action + 两张牌的id
3, 可能会需要洗牌(只洗弃牌)
4, 通知其他所有玩家, (另一个玩家摸了牌的action + heroId + 牌数)
===========出牌阶段==============
//1, server检测玩家是否有可以主动使用的技能和牌, 如果没有( 类似只有闪和驱散, 而且都是不能主动使用的技能 ), 则通知玩家
1, server发送给所有玩家 出牌的heroId+出牌阶段action
2, 客户端使用手牌或技能, 或装备装备, 或使用装备等等
3, 点击弃牌, 
===========弃牌阶段==============
1, 客户端检查<=手牌上限, 则传给服务器端    确定弃牌的action
2, 客户端检查如果>手牌上线, 则弹出确定按钮, 玩家选择要弃掉的牌, 点击确定, 传给服务器端确定弃牌的action+id们, 
3, server传给其他所有玩家, 有人弃牌了牌的action+弃牌玩家的heroId+弃的牌数
4, server检查手牌数如果仍大于手牌上线, 则传给客户端继续弃牌的action, 
5, 重复2, 直到弃掉了多余的牌
===========回合结束阶段==============
回合结束后, server端结束此次循环(item08所描述的循环), 重复07.













